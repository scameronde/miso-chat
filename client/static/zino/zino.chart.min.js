(function(r,y){function z(c,a,b,e){e=e*Math.PI/180;c+=b*Math.cos(e);a+=b*Math.sin(e);return[c,a]}function u(){this._defaults={plugin:"svg",type:"line",variation:null,points:!1,stacking:!1,progression:"forward",legend:!0,tooltip:{color:"#fff",fill:"#000",radius:"2px",opacity:1,offset:{x:15,y:15},pattern:"%label, %value (%percent)"},series:[],lineRowColor:"#ccc",axisColor:"#444",textColor:"#444",fontSize:"12px",fontFamily:"Arial",radius:75,innerRadius:50,width:530,height:320};this.points=[];this.over=
!1;this.tooltip={}}u.getWebsafeColors=function(){var c,a,b,e=[],d="00 33 66 99 CC FF".split(" ");for(c=0;6>c;c++)for(a=0;6>a;a++)for(b=0;6>b;b++)e.push(["#",d[c],d[a],d[b]].join(""));return e};u.colorLuminance=function(c,a){c=String(c).replace(/[^0-9a-f]/gi,"");6>c.length&&(c=c[0]+c[0]+c[1]+c[1]+c[2]+c[2]);a=a||0;var b="#",e,d;for(d=0;3>d;d++)e=parseInt(c.substr(2*d,2),16),e=Math.round(Math.min(Math.max(0,e+e*a),255)).toString(16),b+=("00"+e).substr(e.length);return b};u.getColors=function(c){var a=
"#3366CC #DC3912 #067A06 #FFCC00 #663300 #660066 #3399CC #CC6600 #CC3399 #CC6666 #339900 #CC99FF #CC3300 #99FF66 #993366 #16448A".split(" ");return c!==y&&a[c]!==y?a[c]:a};u.hexToRgb=function(c){c=c.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,c,e,d){return c+c+e+e+d+d});return(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null};u.prototype={_attachChart:function(c,a){if(this._getInst(c))return!1;var b=r(c),e=this._newInst(b);
r.extend(e.settings,this._defaults,a);if(-1===r.inArray(e.settings.plugin,["svg","canvas"]))throw Error("Ivalid value of 'plugin'. Supported values are: 'svg' and 'canvas'.");b.addClass("zui-chart zui-chart-"+e.settings.type);e.settings.paddingTop=Math.floor(10*e.settings.height/100);e.settings.paddingBottom=Math.floor(10*e.settings.height/100);e.settings.paddingLeft=Math.floor(10*e.settings.width/100);e.settings.paddingRight=e.settings.legend?Math.floor(20*e.settings.width/100):0;"pie"===e.settings.type&&
"multi-level"===e.settings.variation&&e.settings.legend&&-1!==r.inArray(e.settings.legend,[!0,1,2])&&(e.settings.paddingRight=0);e.settings.canvasWidth=e.settings.width-e.settings.paddingLeft-(-1===r.inArray(e.settings.type,["ohlc","candlestick","spline","scatter","bubble"])?e.settings.paddingRight:0);e.settings.canvasHeight=e.settings.height-e.settings.paddingTop-e.settings.paddingBottom;switch(e.settings.type){case "line":case "area":case "bar":case "column":case "stepline":case "spline":case "bubble":case "scatter":e.settings.blockNum=
e.settings.series[0].data.length;break;default:e.settings.blockNum=e.settings.series.length-(-1===r.inArray(e.settings.type,["ohlc","candlestick"])?1:0)}e.settings.blockWidth=e.settings.canvasWidth/e.settings.blockNum;e.settings.blockHeight=e.settings.canvasHeight/e.settings.blockNum;switch(e.settings.plugin){case "canvas":e.handle=zino.Canvas({target:c,width:e.settings.width,height:e.settings.height});break;case "svg":e.handle=zino.Svg({target:c,width:e.settings.width,height:e.settings.height}),
e.handle.desc("Created with Zino UI "+r.zinoChart.version),b=e.handle.clipPath("zinoui-1").getShape(),e.handle.rect(e.settings.paddingLeft,e.settings.paddingTop,0,0,e.settings.canvasWidth,e.settings.canvasHeight,!1).attr({fill:"none"}).appendTo(b)}r.data(c,"chart",e);this.draw.call(this,c)},draw:function(c){var a=this._getInst(c);if(!a)return!1;switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"#FFFFFF"}).begin().rect(0,0,a.settings.width,a.settings.height).fill();break;case "svg":a.handle.rect(0,
0,0,0,a.settings.width,a.settings.height).attr({fill:"#FFFFFF",stroke:"none","stroke-width":0}).insert()}switch(a.settings.type){case "pie":this.pie.call(this,c);break;case "donut":this.donut.call(this,c);break;case "bar":this.bar.call(this,c);break;case "column":this.column.call(this,c);break;case "stepline":this.stepline.call(this,c);break;case "line":this.line.call(this,c);break;case "area":this.area.call(this,c);break;case "polar":this.polar.call(this,c);break;case "radar":this.radar.call(this,
c);break;case "rose":this.rose.call(this,c);break;case "candlestick":this.candlestick.call(this,c);break;case "ohlc":this.ohlc.call(this,c);break;case "spline":this.spline.call(this,c);break;case "scatter":this.scatter.call(this,c);break;case "bubble":this.bubble.call(this,c);break;case "gauge":this.gauge.call(this,c)}},_hideLabelsChart:function(c){if(!this._getInst(c))return!1;r(c).find(".zui-chart-labels").remove()},_showLabelsChart:function(c){c=this._getInst(c);if(!c)return!1;var a,b,e,d,f=0,
g=0,l=Math.floor((c.settings.width-c.settings.paddingRight)/2),k=Math.floor(c.settings.height/2);"svg"===c.settings.plugin&&(d=c.handle.g().attr({"class":"zui-chart-labels"}).getShape());a=0;for(b=c.settings.series.length;a<b;a++)g+=c.settings.series[a].value;a=0;for(b=c.settings.series.length;a<b;a++){e=c.settings.series[a].value/g*360+f;switch(c.settings.plugin){case "canvas":c.handle.attr({font:c.settings.fontSize+" "+c.settings.fontFamily,textAlign:"center",textBaseline:"middle",fillStyle:c.settings.textColor}).text(c.settings.series[a].value,
l+(c.settings.radius+20)*Math.cos(-(f+e)/2*Math.PI/180),k+(c.settings.radius+20)*Math.sin(-(f+e)/2*Math.PI/180));break;case "svg":c.handle.text(l+(c.settings.radius+20)*Math.cos(-(f+e)/2*Math.PI/180),k+(c.settings.radius+20)*Math.sin(-(f+e)/2*Math.PI/180),c.settings.series[a].value,!1).attr({fill:c.settings.textColor,"font-family":c.settings.fontFamily,"font-size":c.settings.fontSize,"text-anchor":"middle"}).appendTo(d)}f=e}},_hideLegendChart:function(c){if(!this._getInst(c))return!1;r(c).find(".zui-chart-legend").remove()},
_showLegendChart:function(c){c=this._getInst(c);if(!c)return!1;var a,b,e,d,f,g=u.getColors();"svg"===c.settings.plugin&&(d=c.handle.g().attr({"class":"zui-chart-legend"}).getShape());switch(c.settings.type){case "stepline":b=c.settings.series[0].length;e=1;break;case "pie":case "donut":case "line":case "area":case "bar":case "column":case "polar":case "radar":case "rose":b=c.settings.series.length,e=2}for(a=0;a<b;a++)switch(c.settings.plugin){case "canvas":c.handle.attr({fillStyle:c.settings.series[a].color||
g[a]}).fillRect(c.settings.width-c.settings.paddingRight+10,c.settings.paddingTop+15*a,12,12);c.handle.attr({font:c.settings.fontSize+" "+c.settings.fontFamily,textAlign:"left",textBaseline:"top",fillStyle:c.settings.textColor,strokeStyle:"transparent"}).text(1===e?c.settings.series[0][a]:c.settings.series[a].label,c.settings.width-c.settings.paddingRight+25,c.settings.paddingTop+15*a);break;default:c.handle.rect(c.settings.width-c.settings.paddingRight+10,c.settings.paddingTop+15*a,0,0,12,12,!1).attr({fill:c.settings.series[a].color||
g[a],stroke:"none","stroke-width":0}).appendTo(d),f=c.handle.factory("text",!1).attr({x:c.settings.width-c.settings.paddingRight+25,y:c.settings.paddingTop+15*a,"font-family":c.settings.fontFamily,"font-size":c.settings.fontSize,"text-anchor":"start"}).appendTo(d).getShape(),f=c.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(f).getShape(),c.handle.textNode(1===e?c.settings.series[0][a]:c.settings.series[a].label,!1).appendTo(f)}},pie:function(c){function a(c){c.category&&
(x+=1,a(c.category[0]))}function b(a,c){A[c]||(A[c]=0);for(var d=0,e=a.length;d<e;d++)A[c]+=parseFloat(a[d].value),B+=1,a[d].category&&b(a[d].category,c+1)}function e(a,c,b){if(!(v>=B-1))for(var g,f,h,k,p=d.settings.radius/(x+1)*(c+1),r=d.settings.radius/(x+1)*c,u=0,y=a.length;u<y;u++){g=parseFloat(a[u].value)/A[c]*360+b;n=z(q,t,p,-b);l=z(q,t,p,-g);f=z(q,t,r,-b);h=z(q,t,r,-g);switch(d.settings.plugin){case "canvas":d.handle.attr({fillStyle:a[u].color,strokeStyle:"#fff",lineWidth:2}).begin().moveTo(h[0],
h[1]).lineTo(l[0],l[1]).arc(q,t,p,g*Math.PI/180,b*Math.PI/180,!0).lineTo(n[0],n[1]).lineTo(f[0],f[1]).arc(q,t,r,b*Math.PI/180,g*Math.PI/180,!1).close().fill().stroke();break;default:d.handle.rose(n[0],n[1],p,l[0],l[1],h[0],h[1],r,f[0],f[1],!1).attr({fill:a[u].color,stroke:"#fff","stroke-width":2,"class":a[u].label}).appendTo(m)}if(d.settings.legend)switch(f=(g+b)/2,h=z(q,t,p,-f),k=z(q,t,r,-f),f=((h[0]+k[0])/2).toFixed(2),k=((h[1]+k[1])/2).toFixed(2),d.settings.plugin){case "canvas":switch(d.settings.legend){case 3:case 4:d.handle.attr({fillStyle:a[u].color||
w[u]}).fillRect(d.settings.width-d.settings.paddingRight+10,d.settings.paddingTop+15*v,12,12);h=a[u].label;4===d.settings.legend&&(h+=": "+a[u].value);d.handle.attr({font:d.settings.fontSize+" "+d.settings.fontFamily,textAlign:"left",textBaseline:"top",fillStyle:d.settings.textColor,strokeStyle:"transparent"}).text(h,d.settings.width-d.settings.paddingRight+25,d.settings.paddingTop+15*v);break;default:h=a[u].label,2===d.settings.legend&&(h+=": "+a[u].value),d.handle.attr({font:"9px "+d.settings.fontFamily,
textAlign:"center",textBaseline:"middle",fillStyle:d.settings.textColor,strokeStyle:"transparent"}).transform(1,0,0,1,f,k).text(h,0,0).resetTransform()}break;default:switch(d.settings.legend){case 3:case 4:d.handle.rect(d.settings.width-d.settings.paddingRight+10,d.settings.paddingTop+15*v,0,0,12,12,!1).attr({fill:a[u].color||w[u],stroke:"none","stroke-width":0}).appendTo(D);f=d.handle.factory("text",!1).attr({x:d.settings.width-d.settings.paddingRight+25,y:d.settings.paddingTop+15*v,"font-family":d.settings.fontFamily,
"font-size":d.settings.fontSize,"text-anchor":"start"}).appendTo(D).getShape();f=d.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(f).getShape();h=a[u].label;4===d.settings.legend&&(h+=": "+a[u].value);d.handle.textNode(h,!1).appendTo(f);break;default:f=d.handle.factory("text",!1).attr({x:0,y:0,transform:"matrix(1,0,0,1,"+f+","+k+")",fill:d.settings.textColor,"font-family":d.settings.fontFamily,"font-size":"9px","text-anchor":"middle"}).appendTo(D).getShape(),f=
d.handle.factory("tspan",!1).attr({"alignment-baseline":"middle"}).appendTo(f).getShape(),h=a[u].label,2===d.settings.legend&&(h+=": "+a[u].value),d.handle.textNode(h,!1).appendTo(f)}}v+=1;a[u].category&&c+1<=x&&e(a[u].category,c+1,b);b=g}}var d=this._getInst(c);if(!d)return!1;var f,g,l,k,m,h=[],n=0,p=0,q=Math.floor((d.settings.width-d.settings.paddingRight)/2),t=Math.floor(d.settings.height/2),w=u.getColors();if("svg"===d.settings.plugin)for(m=d.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),
f=0,g=d.settings.series.length;f<g;f++)h[f]=d.handle.radialGradient(q,t,d.settings.radius).attr({id:"radial-"+f,gradientUnits:"userSpaceOnUse"}).getShape(),d.handle.factory("stop",!1).attr({offset:"0","stop-color":d.settings.series[f].color!==y?d.settings.series[f].color:w[f]}).appendTo(h[f]),d.handle.factory("stop",!1).attr({offset:"1","stop-color":u.colorLuminance(d.settings.series[f].color!==y?d.settings.series[f].color:w[f],-.3)}).appendTo(h[f]);else if("canvas"===d.settings.plugin)for(f=0,g=
d.settings.series.length;f<g;f++)h[f]=d.handle.radialGradient(q,t,.9*d.settings.radius,q,t,d.settings.radius-d.settings.radius),h[f].addColorStop(0,d.settings.series[f].color!==y?d.settings.series[f].color:w[f]),h[f].addColorStop(1,u.colorLuminance(d.settings.series[f].color!==y?d.settings.series[f].color:w[f],-.3));var x=0,v=0,B=0,A=[];if("multi-level"===d.settings.variation){if(d.settings.legend&&"svg"===d.settings.plugin)var D=d.handle.g().attr({"class":"zui-chart-legend"}).getShape();a(d.settings.series[0]);
b(d.settings.series,0);g=d.settings.radius/(x+1);for(f=0;f<x;f++)if(0<f)e(d.settings.series[0].category,f,0);else{switch(d.settings.plugin){case "canvas":d.handle.attr({fillStyle:d.settings.series[0].color,strokeStyle:"#fff",lineWidth:2}).begin().circle(q,t,g).close().fill().stroke();break;default:d.handle.circle(q,t,g,!1).attr({fill:d.settings.series[0].color}).appendTo(m)}if(d.settings.legend)switch(d.settings.plugin){case "canvas":switch(d.settings.legend){case 3:case 4:break;default:d.handle.attr({font:"9px "+
d.settings.fontFamily,textAlign:"center",textBaseline:"middle",fillStyle:d.settings.textColor,strokeStyle:"transparent"}).transform(1,0,0,1,q,t).text(d.settings.series[0].label,0,0).resetTransform()}break;default:switch(d.settings.legend){case 3:case 4:break;default:k=d.handle.factory("text",!1).attr({x:0,y:0,transform:"matrix(1,0,0,1,"+q+","+t+")",fill:d.settings.textColor,"font-family":d.settings.fontFamily,"font-size":"9px","text-anchor":"middle"}).appendTo(D).getShape(),k=d.handle.factory("tspan",
!1).attr({"alignment-baseline":"middle"}).appendTo(k).getShape(),d.handle.textNode(d.settings.series[0].label,!1).appendTo(k)}}}}else{f=0;for(g=d.settings.series.length;f<g;f++)p+=d.settings.series[f].value;f=0;for(g=d.settings.series.length;f<g;f++){k=Math.floor(999999*Math.random());l=d.settings.series[f].value/p*360+n;switch(d.settings.plugin){case "canvas":d.handle.attr({lineWidth:2,fillStyle:h[f],strokeStyle:"#FFFFFF"}).sector(q,t,d.settings.radius,n,l);break;default:d.handle.sector(q,t,d.settings.radius,
n.toFixed(2),l.toFixed(2),!1).attr({fill:"url(#radial-"+f+")",stroke:"#FFFFFF","stroke-width":2,"data-rel":"sector_"+k,"zui:tooltip":d.settings.tooltip&&d.settings.tooltip.pattern?d.settings.tooltip.pattern.replace("%label",d.settings.series[f].label).replace("%value",d.settings.series[f].value).replace("%percent",(d.settings.series[f].value/p*100).toFixed(1)+"%"):d.settings.series[f].label}).bind("click",function(a,c,b,e){return function(g,f){var h=r(f),h=h.siblings("path[data-rel='arc_"+h.attr("data-rel").split("_")[1]+
"']");0===h.length?d.handle.arc(q,t,d.settings.radius+3,a,c,!1).attr({fill:"none",stroke:b,"stroke-opacity":1,"stroke-width":3,"data-rel":"arc_"+e}).appendTo(m):h.remove()}}(n.toFixed(2),l.toFixed(2),d.settings.series[f].color!==y?d.settings.series[f].color:w[f],k)).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,d){a._mousemove.call(a,
c,b,d)}}(this)).appendTo(m)}n=l}this._tooltip.call(this,c);this._showLabelsChart.call(this,c);d.settings.legend&&this._showLegendChart.call(this,c)}},polar:function(c){var a=this._getInst(c);if(!a)return!1;this.setCircumference.call(this,c);var b,e,d,f,g,l,k,m,h=[],n=Math.floor((a.settings.width-a.settings.paddingRight)/2),p=Math.floor(a.settings.height/2),q=this.getBounds2(c),t=360/a.settings.series[0].data.length,w=u.getColors();"svg"===a.settings.plugin&&(k=a.handle.g().attr({"class":"zui-chart-area"}).getShape(),
m=a.handle.g().attr({"class":"zui-chart-points"}).getShape());b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=0,f=a.settings.series.length;d<f;d++)l=a.settings.series[d].data[b].value/q.yMax*a.settings.radius,g=n+l*Math.cos((-90+t*b)*Math.PI/180),l=p+l*Math.sin((-90+t*b)*Math.PI/180),h[d]===y&&(h[d]=[]),0<b?h[d].push(["L",g,",",l].join("")):h[d].push(["M",g,",",l].join(""));if("scatter"!==a.settings.variation)for(d=0,f=h.length;d<f;d++)switch(a.settings.plugin){case "canvas":b=u.hexToRgb(a.settings.series[d].color||
w[d]);h[d].push(h[d][0]);a.handle.attr({fillStyle:"area"===a.settings.variation?["rgba("+b.r,b.g,b.b,"0.4)"].join():"none",strokeStyle:a.settings.series[d].color||w[d],lineWidth:2}).path(h[d].join(""));break;default:h[d].push("Z"),a.handle.path(h[d].join(""),!1).attr({fill:"area"===a.settings.variation?a.settings.series[d].color||w[d]:"none","fill-opacity":"area"===a.settings.variation?.4:1,stroke:a.settings.series[d].color||w[d],"stroke-width":2,style:"stroke-dasharray: 3000,3000"}).appendTo(k)}b=
0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=0,f=a.settings.series.length;d<f;d++)if(l=a.settings.series[d].data[b].value/q.yMax*a.settings.radius,g=n+l*Math.cos((-90+t*b)*Math.PI/180),l=p+l*Math.sin((-90+t*b)*Math.PI/180),a.settings.points||"scatter"===a.settings.variation)switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"#FFFFFF",strokeStyle:a.settings.series[d].color||w[d],lineWidth:2}).begin().circle(g,l,3).close().fill().stroke();break;default:a.handle.circle(g,l,3,
!1).attr({fill:"#FFFFFF",stroke:a.settings.series[d].color||w[d],"stroke-width":2}).appendTo(m)}this.setCircumferenceLabels.call(this,c);a.settings.legend&&this._showLegendChart.call(this,c)},radar:function(c){var a=this._getInst(c);if(!a)return!1;this.setCircumference.call(this,c);var b,e,d,f,g,l,k,m=[],h=Math.floor((a.settings.width-a.settings.paddingRight)/2),n=Math.floor(a.settings.height/2),p=this.getBounds2(c),q=360/a.settings.series[0].data.length,t=u.getColors();"svg"===a.settings.plugin&&
(k=a.handle.g().attr({"class":"zui-chart-area"}).getShape());b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=0,f=a.settings.series.length;d<f;d++)l=a.settings.series[d].data[b].value/p.yMax*a.settings.radius,g=h+l*Math.cos((-90+q*b)*Math.PI/180),l=n+l*Math.sin((-90+q*b)*Math.PI/180),m[d]===y&&(m[d]=[]),0<b?m[d].push(["L",g,",",l].join("")):m[d].push(["M",g,",",l].join(""));d=0;for(f=m.length;d<f;d++)switch(a.settings.plugin){case "canvas":b=u.hexToRgb(a.settings.series[d].color||t[d]);m[d].push(m[d][0]);
a.handle.attr({fillStyle:["rgba("+b.r,b.g,b.b,"0.4)"].join(),strokeStyle:a.settings.series[d].color||t[d],lineWidth:1}).path(m[d].join(""));break;default:m[d].push("Z"),a.handle.path(m[d].join(""),!1).attr({fill:a.settings.series[d].color||t[d],"fill-opacity":.4,stroke:a.settings.series[d].color||t[d],"stroke-width":1}).appendTo(k)}this.setCircumferenceLabels.call(this,c);a.settings.legend&&this._showLegendChart.call(this,c)},rose:function(c){var a=this._getInst(c);if(!a)return!1;this.setCircumference.call(this,
c);var b,e,d,f,g,l,k,m,h,n,p,q,t,w,x=0;d=[];var v=[],r=Math.floor((a.settings.width-a.settings.paddingRight)/2),A=Math.floor(a.settings.height/2),D=this.getBounds2(c),C=360/a.settings.series[0].data.length,E=u.getColors();if("svg"===a.settings.plugin)for(l=a.handle.g().attr({"class":"zui-chart-area"}).getShape(),a.handle.g().attr({"class":"zui-chart-area222"}).getShape(),b=0,e=a.settings.series.length;b<e;b++)d[b]=a.handle.radialGradient(r,A,a.settings.radius).attr({id:"radial-"+b,gradientUnits:"userSpaceOnUse"}).getShape(),
a.handle.factory("stop",!1).attr({offset:"0","stop-color":a.settings.series[b].color!==y?a.settings.series[b].color:E[b]}).appendTo(d[b]),a.handle.factory("stop",!1).attr({offset:"1","stop-color":u.colorLuminance(a.settings.series[b].color!==y?a.settings.series[b].color:E[b],-.3)}).appendTo(d[b]);b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=v[b]=0,f=a.settings.series.length;d<f;d++)v[b]+=a.settings.series[d].data[b].value;switch(a.settings.stacking){case "normal":case "percent":x=Math.max.apply(Math,
v)}b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=p=0,f=a.settings.series.length;d<f;d++)if(a.settings.stacking){switch(a.settings.stacking){case "normal":k=a.settings.series[d].data[b].value/x;g=a.settings.radius*(k+p);p+=k;break;case "percent":k=a.settings.series[d].data[b].value/v[b],g=a.settings.radius*(k+p),p+=k}k=-90+C*b;m=-90+C*b+C;h=Math.abs(k-m)/4;k+=h;m-=h;h=z(r,A,g,-k);n=z(r,A,g,-m);if(0<d)switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:E[d]}).begin().moveTo(t[0],
t[1]).lineTo(n[0],n[1]).arc(r,A,g,k*Math.PI/180,m*Math.PI/180,!1).lineTo(h[0],h[1]).lineTo(q[0],q[1]).arc(r,A,w,k*Math.PI/180,m*Math.PI/180,!1).close().stroke().fill();break;default:a.handle.rose(h[0],h[1],g,n[0],n[1],t[0],t[1],w,q[0],q[1],!1).attr({fill:"url(#radial-"+d+")","zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[d].label).replace("%value",a.settings.series[d].data[b].value).replace("%percent",(a.settings.series[d].data[b].value/
v[b]*100).toFixed(1)+"%"):a.settings.series[b].label}).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(l)}else switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:E[d]}).sector(r,A,g,k,m);break;default:a.handle.rose(h[0],h[1],g,n[0],n[1],r,A,0,r,A,!1).attr({fill:"url(#radial-"+
d+")","zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[d].label).replace("%value",a.settings.series[d].data[b].value).replace("%percent",(a.settings.series[d].data[b].value/v[b]*100).toFixed(1)+"%"):a.settings.series[b].label}).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,
d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(l)}q=h;t=n;w=g}else switch(g=a.settings.series[d].data[b].value/D.yMax*a.settings.radius,k=-90+C*b+C/f*(d-1),m=-90+C*b+C/f*d,a.settings.plugin){case "canvas":a.handle.attr({fillStyle:E[d]}).sector(r,A,g,k,m);break;default:a.handle.sector(r,A,g,k,m,!1).attr({fill:"url(#radial-"+d+")","zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[d].label).replace("%value",a.settings.series[d].data[b].value).replace("%percent",
(a.settings.series[d].data[b].value/v[b]*100).toFixed(1)+"%"):a.settings.series[b].label}).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(l)}this._tooltip.call(this,c);this.setCircumferenceLabels.call(this,c);a.settings.legend&&this._showLegendChart.call(this,c)},donut:function(c){var a=
this._getInst(c);if(!a)return!1;var b,e,d,f,g,l,k,m,h,n=a.settings.innerRadius,p=a.settings.radius,q=[],t=0,w=0,x=Math.floor((a.settings.width-a.settings.paddingRight)/2),v=Math.floor(a.settings.height/2),B=u.getColors();if("svg"===a.settings.plugin)for(g=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),b=0,e=a.settings.series.length;b<e;b++)q[b]=a.handle.radialGradient(x,v,a.settings.radius).attr({id:"radial-"+b,gradientUnits:"userSpaceOnUse"}).getShape(),a.handle.factory("stop",!1).attr({offset:"0",
"stop-color":a.settings.series[b].color!==y?a.settings.series[b].color:B[b]}).appendTo(q[b]),a.handle.factory("stop",!1).attr({offset:"1","stop-color":u.colorLuminance(a.settings.series[b].color!==y?a.settings.series[b].color:B[b],-.3)}).appendTo(q[b]);else if("canvas"===a.settings.plugin)for(b=0,e=a.settings.series.length;b<e;b++)q[b]=a.handle.radialGradient(x,v,.9*a.settings.radius,x,v,a.settings.radius-a.settings.radius),q[b].addColorStop(0,a.settings.series[b].color!==y?a.settings.series[b].color:
B[b]),q[b].addColorStop(1,u.colorLuminance(a.settings.series[b].color!==y?a.settings.series[b].color:B[b],-.3));b=0;for(e=a.settings.series.length;b<e;b++)w+=a.settings.series[b].value;b=0;for(e=a.settings.series.length;b<e;b++){f=Math.floor(999999*Math.random());d=a.settings.series[b].value/w*360+t;switch(a.settings.plugin){case "canvas":l=z(x,v,n,-t);k=z(x,v,n,-d);m=z(x,v,p,-t);h=z(x,v,p,-d);a.handle.attr({lineWidth:2,fillStyle:q[b],strokeStyle:"#FFFFFF"}).begin().moveTo(h[0],h[1]).lineTo(k[0],
k[1]).arc(x,v,n,d*Math.PI/180,t*Math.PI/180,!0).lineTo(l[0],l[1]).lineTo(m[0],m[1]).arc(x,v,p,t*Math.PI/180,d*Math.PI/180,!1).close().fill().stroke();break;default:l=z(x,v,n,-t),k=z(x,v,n,-d),m=z(x,v,p,-t),h=z(x,v,p,-d),a.handle.rose(l[0],l[1],n,k[0],k[1],h[0],h[1],p,m[0],m[1],!1).attr({fill:"url(#radial-"+b+")",stroke:"#FFFFFF","stroke-width":2,"data-rel":"sector_"+f,"zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[b].label).replace("%value",
a.settings.series[b].value).replace("%percent",(a.settings.series[b].value/w*100).toFixed(1)+"%"):a.settings.series[b].label}).bind("click",function(c,b,d,e){return function(f,h){var k=r(h),k=k.siblings("path[data-rel='arc_"+k.attr("data-rel").split("_")[1]+"']");0===k.length?a.handle.arc(x,v,a.settings.radius+3,c,b,!1).attr({fill:"none",stroke:d,"stroke-opacity":1,"stroke-width":3,"data-rel":"arc_"+e}).appendTo(g):k.remove()}}(t.toFixed(2),d.toFixed(2),a.settings.series[b].color!==y?a.settings.series[b].color:
B[b],f)).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(g)}t=d}this._tooltip.call(this,c);this._showLabelsChart.call(this,c);a.settings.legend&&this._showLegendChart.call(this,c)},_lineArea:function(c){var a=this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);a.settings.legend&&
this._showLegendChart.call(this,c);var b,e,d,f,g,l,k,m,h,n,p,q=[],t=u.getColors();"svg"===a.settings.plugin&&("area"===a.settings.type&&(p=a.handle.g().attr({"class":"zui-chart-plot"}).getShape()),n=a.handle.g().attr({"class":"zui-chart-canvas","clip-path":"url(#zinoui-1)"}).getShape());b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=q[b]=0,f=a.settings.series.length;d<f;d++)q[b]+=a.settings.series[d].data[b].value;b=0;for(e=a.settings.series.length;b<e;b++){g=a.settings.paddingLeft+a.settings.blockWidth/
2;k=[];m=[];d=0;for(f=a.settings.series[b].data.length;d<f;d++)l=a.settings.paddingLeft+a.settings.blockWidth*d+a.settings.blockWidth/2,h=this.getY(c,a.settings.series[b].data[d].value),0===d?(k.push("M"+g+","+h),m.push("M"+g+","+h)):(k.push("L"+l+","+h),m.push("L"+l+","+h)),this.points.push({x:l,y:h,radius:3,color:a.settings.series[b].color||t[b],name:a.settings.categories[0].category[d].label,data:a.settings.series[b].data[d].value});d=u.hexToRgb(a.settings.series[b].color||t[b]);if("area"===a.settings.type)switch(m.push("L"+
l+","+(a.settings.height-a.settings.paddingBottom)),m.push("L"+g+","+(a.settings.height-a.settings.paddingBottom)),a.settings.plugin){case "canvas":a.handle.attr({fillStyle:["rgba("+d.r,d.g,d.b,"0.3)"].join(),strokeStyle:"transparent"}).path(m.join(""));break;default:m.push("Z"),a.handle.path(m.join(""),!1).attr({fill:a.settings.series[b].color||t[b],"fill-opacity":.3,stroke:"none","stroke-width":0}).appendTo(p)}switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"transparent",strokeStyle:a.settings.series[b].color||
t[b],lineWidth:2}).path(k.join(""));break;default:a.handle.path(k.join(""),!1).attr({fill:"none","fill-opacity":1,stroke:a.settings.series[b].color||t[b],"stroke-width":2,style:"stroke-dasharray: 3000,3000"}).appendTo(n)}}b=0;for(e=a.settings.series.length;b<e;b++)for(d=0,f=a.settings.series[b].data.length;d<f;d++)switch(l=a.settings.paddingLeft+a.settings.blockWidth*d+a.settings.blockWidth/2,h=this.getY(c,a.settings.series[b].data[d].value),a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"#FFFFFF",
strokeStyle:a.settings.series[b].color||t[b],lineWidth:2}).begin().circle(l,h,4).close().fill().stroke();break;default:a.handle.circle(l,h,4,!1).attr({fill:"#FFFFFF",stroke:a.settings.series[b].color||t[b],"stroke-width":2,"zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[b].label).replace("%value",a.settings.series[b].data[d].value).replace("%percent",(a.settings.series[b].data[d].value/q[b]*100).toFixed(1)+"%"):a.settings.series[b].label}).bind("mouseenter",
function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(n)}this._tooltip.call(this,c)},line:function(c){this._lineArea.call(this,c)},area:function(c){this._lineArea.call(this,c)},bar:function(c){var a=this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);a.settings.legend&&this._showLegendChart.call(this,
c);var b,e,d,f,g,l,k,m,h,n;d=[];var p=0,q=[];m=a.settings.series.length;h=this.getXX(c,0);var t=this.getBounds2(c).yMax,r=u.getColors();if("svg"===a.settings.plugin)for(g=a.handle.g().attr({"class":"zui-chart-canvas","clip-path":"url(#zinoui-1)"}).getShape(),b=0,e=a.settings.series.length;b<e;b++)d[b]=a.handle.linearGradient("50%","0%","50%","100%").attr({id:"linear-"+b}).getShape(),a.handle.factory("stop",!1).attr({offset:"0%","stop-color":a.settings.series[b].color||r[b]}).appendTo(d[b]),a.handle.factory("stop",
!1).attr({offset:"100%","stop-color":u.colorLuminance(a.settings.series[b].color||r[b],-.3)}).appendTo(d[b]);b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=q[b]=0,f=a.settings.series.length;d<f;d++)q[b]+=a.settings.series[d].data[b].value;switch(a.settings.stacking){case "normal":case "percent":p=Math.max.apply(Math,q);m=a.settings.blockHeight/2;break;default:m=a.settings.blockHeight/2/m}b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=n=0,f=a.settings.series.length;d<f;d++){switch(a.settings.stacking){case "normal":h=
a.settings.series[d].data[b].value/p;k=a.settings.canvasWidth*h;h=n+a.settings.paddingLeft;l=a.settings.paddingTop+b*a.settings.blockHeight+(a.settings.blockHeight-m)/2;n+=k;break;case "percent":h=a.settings.series[d].data[b].value/q[b];k=a.settings.canvasWidth*h;h=n+a.settings.paddingLeft;l=a.settings.paddingTop+b*a.settings.blockHeight+(a.settings.blockHeight-m)/2;n+=k;break;default:k=a.settings.series[d].data[b].value/t*a.settings.canvasWidth,l=a.settings.paddingTop+b*a.settings.blockHeight+(m+
2)*d+(a.settings.blockHeight-(m+2)*(f-1)+2)/2}switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:r[d]}).fillRect(h,l,k,m);break;default:a.handle.rect(h,l,0,0,k,m,!1).attr({fill:"url(#linear-"+d+")","zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[d].label).replace("%value",a.settings.series[d].data[b].value).replace("%percent",(a.settings.series[d].data[b].value/q[b]*100).toFixed(1)+"%"):a.settings.series[d].label}).bind("mouseenter",
function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(g)}}this._tooltip.call(this,c)},bubble:function(c){var a=this._getInst(c);if(!a)return!1;this.setGrid.call(this,c);this.setAxis.call(this,c);var b,e,d,f,g,l,k,m,h,n=u.getColors(),p=this.getBounds2(c);"svg"===a.settings.plugin?(f={fill:a.settings.textColor,
"font-family":a.settings.fontFamily,"font-size":a.settings.fontSize,"text-anchor":"middle"},d=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-y"}).getShape(),g=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-x"}).getShape(),m=a.handle.g().attr({"class":"zui-chart-circles"}).getShape()):"canvas"===a.settings.plugin&&(f={fillStyle:a.settings.textColor,font:a.settings.fontSize+" "+a.settings.fontFamily,strokeStyle:"transparent"});a.settings.series.sort(function(a,b){return!isNaN(parseFloat(a[1]))&&
isFinite(a[1])?a[1]<b[1]?-1:a[1]>b[1]?1:0:-1});b=0;for(e=a.settings.categories[0].category.length;b<e;b++)switch(a.settings.plugin){case "canvas":a.handle.attr(f).attr({textAlign:"center"}).text(a.settings.categories[0].category[b].label,a.settings.paddingLeft+a.settings.blockWidth*b+a.settings.blockWidth/2,a.settings.height-a.settings.paddingBottom+20);break;default:a.handle.text(a.settings.paddingLeft+a.settings.blockWidth*b+a.settings.blockWidth/2,a.settings.height-a.settings.paddingBottom+20,
a.settings.categories[0].category[b].label,!1).attr(f).appendTo(g)}for(b=0;b<=p.yMax;b+=Math.ceil(p.yMax/4))switch(a.settings.plugin){case "canvas":a.handle.attr(f).attr({textBaseline:"middle",textAlign:"right"}).text(b,a.settings.paddingLeft-20,this.getYY(c,b));break;default:e=a.handle.factory("text",!1).attr(f).attr({x:a.settings.paddingLeft-10,y:this.getYY(c,b),"text-anchor":"end"}).appendTo(d).getShape(),e=a.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(e).getShape(),a.handle.textNode(b,
!1).appendTo(e)}b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=0,f=a.settings.series.length;d<f;d++)switch(g=this.getX(c,a.settings.series[d].data[b].x),l=this.getY(c,a.settings.series[d].data[b].y),a.settings.series[d].data[b].z!==y&&(k=a.settings.series[d].data[b].z/p.zMax*20),a.settings.plugin){case "canvas":h=u.hexToRgb(a.settings.series[d].color||n[d]);a.handle.attr({fillStyle:["rgba("+h.r,h.g,h.b,"0.4)"].join()}).begin().circle(g,l,k).fill();break;default:a.handle.circle(g,l,k,!1).attr({fill:a.settings.series[d].color||
n[d],"fill-opacity":.7,stroke:"none","stroke-width":0}).appendTo(m)}},ohlc:function(c){var a=this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);var b,e,d,f,g,l,k,m=u.getColors();this.getBounds(c);"svg"===a.settings.plugin&&(l=a.handle.g().attr({"class":"zui-chart-items","clip-path":"url(#zinoui-1)"}).getShape());b=0;for(e=a.settings.series.length;b<e;b++)switch("svg"===a.settings.plugin&&(a.settings.tooltip.pattern="%label, open: %open, high: %high, low: %low, close: %close",k=a.handle.g(!1).attr({"class":"zui-chart-item",
"zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[b].label).replace("%open",a.settings.series[b].open).replace("%high",a.settings.series[b].high).replace("%low",a.settings.series[b].low).replace("%close",a.settings.series[b].close):a.settings.series[b].label}).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",
function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(l).getShape()),d=a.settings.paddingLeft+b*a.settings.blockWidth+a.settings.blockWidth/2,f=this.getY(c,a.settings.series[b].high),g=this.getY(c,a.settings.series[b].low),a.settings.plugin){case "canvas":a.handle.attr({strokeStyle:a.settings.series[b].color||m[0],lineWidth:2}).line(d+.5,f,d+.5,g);f=this.getY(c,a.settings.series[b].open);a.handle.line(d+1+.5,f,d-6+.5,f);g=this.getY(c,a.settings.series[b].close);a.handle.line(d-
1+.5,g,d+6+.5,g);break;default:a.handle.line(d,f,d,g,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b].color||m[0],"stroke-width":2}).appendTo(k),f=this.getY(c,a.settings.series[b].open),a.handle.line(d+1,f,d-6,f,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b].color||m[0],"stroke-width":2}).appendTo(k),g=this.getY(c,a.settings.series[b].close),a.handle.line(d-1,g,d+6,g,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b].color||m[0],"stroke-width":2}).appendTo(k)}this._tooltip.call(this,
c)},candlestick:function(c){var a=this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);var b,e,d,f,g,l,k,m,h,n=.55*a.settings.blockWidth,p=u.getColors(),q=this.getBounds(c);"svg"===a.settings.plugin&&(m=a.handle.g().attr({"class":"zui-chart-candles","clip-path":"url(#zinoui-1)"}).getShape());b=0;for(e=a.settings.series.length;b<e;b++){"svg"===a.settings.plugin&&(a.settings.tooltip.pattern="%label, open: %open, high: %high, low: %low, close: %close",h=a.handle.g(!1).attr({"class":"zui-chart-candle",
"zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[b].label).replace("%open",a.settings.series[b].open).replace("%high",a.settings.series[b].high).replace("%low",a.settings.series[b].low).replace("%close",a.settings.series[b].close):a.settings.series[b].label}).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",
function(a){return function(b,d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(m).getShape());d=a.settings.series[b].high<a.settings.series[b].low;f=g=a.settings.paddingLeft+b*a.settings.blockWidth+a.settings.blockWidth/2;l=a.settings.height-a.settings.paddingBottom-a.settings.series[b].open/q.yMax*a.settings.canvasHeight;k=a.settings.height-a.settings.paddingBottom-a.settings.series[b].high/q.yMax*a.settings.canvasHeight;if(l>k)switch(a.settings.plugin){case "canvas":a.handle.attr({strokeStyle:a.settings.series[b].color||
p[0],lineWidth:2}).line(f+.5,l,g+.5,k);break;default:a.handle.line(f,l,g,k,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b].color||p[0],"stroke-width":2}).appendTo(h)}f=g=a.settings.paddingLeft+b*a.settings.blockWidth+a.settings.blockWidth/2;l=a.settings.height-a.settings.paddingBottom-a.settings.series[b].low/q.yMax*a.settings.canvasHeight;k=a.settings.height-a.settings.paddingBottom-a.settings.series[b].close/q.yMax*a.settings.canvasHeight;if(l>k)switch(a.settings.plugin){case "canvas":a.handle.attr({strokeStyle:a.settings.series[b].color||
p[0],lineWidth:2}).line(f+.5,l,g+.5,k);break;default:a.handle.line(f,l,g,k,!1).attr({"shape-rendering":"crispEdges",stroke:a.settings.series[b].color||p[0],"stroke-width":2}).appendTo(h)}k=Math.floor(99999*Math.random());f=a.settings.paddingLeft+b*a.settings.blockWidth+(a.settings.blockWidth-n)/2;g=d?a.settings.height-a.settings.paddingBottom-a.settings.series[b].low/q.yMax*a.settings.canvasHeight:a.settings.height-a.settings.paddingBottom-a.settings.series[b].high/q.yMax*a.settings.canvasHeight;
l=a.settings.canvasHeight*(Math.abs(a.settings.series[b].high-a.settings.series[b].low)/q.yMax);switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:d?a.settings.series[b].color||p[0]:"#FFFFFF",strokeStyle:a.settings.series[b].color||p[0],lineWidth:2,"data-rel":"rect_"+k}).begin().rect(f,g,n,l).fill().stroke();break;default:a.handle.rect(f,g,0,0,n,l,!1).attr({fill:d?a.settings.series[b].color||p[0]:"#FFFFFF","shape-rendering":"crispEdges",stroke:a.settings.series[b].color||p[0],"stroke-width":2,
"data-rel":"rect_"+k}).bind("click",function(b,c,d,e,f,g,k){return function(l){var m=null;l=r(l).siblings("rect[data-rel^='inner_']");var n=l.length;0<n&&(m=l.attr("data-rel").split("_")[1],l.remove());0!==n&&f==m||a.handle.rect(b+(k?1:2),c+(k?1:2),0,0,d-(k?2:4),e-(k?2:4),!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:g,"stroke-width":1,"data-rel":"inner_"+f}).appendTo(h)}}(f,g,n,l,k,d?"#FFFFFF":a.settings.series[b].color||p[0],d)).appendTo(h)}}this._tooltip.call(this,c)},column:function(c){var a=
this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);a.settings.legend&&this._showLegendChart.call(this,c);var b,e,d,f,g,l,k,m,h,n,p;d=[];var q=a.settings.series.length,r=0,w=[],x=this.getBounds2(c).yMax,v=u.getColors();if("svg"===a.settings.plugin)for(k=a.handle.g().attr({"class":"zui-chart-canvas","clip-path":"url(#zinoui-1)"}).getShape(),b=0,e=a.settings.series.length;b<e;b++)d[b]=a.handle.linearGradient("0%","50%","100%","50%").attr({id:"linear-"+b}).getShape(),a.handle.factory("stop",!1).attr({offset:"0%",
"stop-color":a.settings.series[b].color||v[b]}).appendTo(d[b]),a.handle.factory("stop",!1).attr({offset:"100%","stop-color":u.colorLuminance(a.settings.series[b].color||v[b],-.3)}).appendTo(d[b]);b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=w[b]=0,f=a.settings.series.length;d<f;d++)w[b]+=a.settings.series[d].data[b].value;switch(a.settings.stacking){case "normal":case "percent":r=Math.max.apply(Math,w);g=a.settings.blockWidth/2;break;default:g=a.settings.blockWidth/2/q}b=0;for(e=a.settings.series[0].data.length;b<
e;b++)for(d=p=0,f=a.settings.series.length;d<f;d++){switch(a.settings.stacking){case "normal":n=a.settings.series[d].data[b].value/r;l=(a.settings.canvasHeight*n).toFixed(2);m=a.settings.paddingLeft+b*a.settings.blockWidth+(a.settings.blockWidth-g)/2;h=((1-n-p)*a.settings.canvasHeight+a.settings.paddingTop).toFixed(2);p+=n;break;case "percent":n=a.settings.series[d].data[b].value/w[b];l=(a.settings.canvasHeight*n).toFixed(2);m=a.settings.paddingLeft+b*a.settings.blockWidth+(a.settings.blockWidth-
g)/2;h=((1-n-p)*a.settings.canvasHeight+a.settings.paddingTop).toFixed(2);p+=n;break;default:l=(a.settings.series[d].data[b].value/x*a.settings.canvasHeight).toFixed(2),m=a.settings.paddingLeft+b*a.settings.blockWidth+(g+2)*d+(a.settings.blockWidth-(g+2)*q+2)/2,h=(a.settings.height-a.settings.paddingTop-l).toFixed(2)}switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:a.settings.series[d].color||v[d]}).fillRect(m,h,g,l);break;default:a.handle.rect(m,h,0,0,g,l,!1).attr({fill:"url(#linear-"+
d+")","zui:tooltip":a.settings.tooltip&&a.settings.tooltip.pattern?a.settings.tooltip.pattern.replace("%label",a.settings.series[d].label).replace("%value",a.settings.series[d].data[b].value).replace("%percent",(a.settings.series[d].data[b].value/w[b]*100).toFixed(1)+"%"):a.settings.series[d].label}).bind("mouseenter",function(a){return function(b,d){a._mouseenter.call(a,c,b,d)}}(this)).bind("mouseleave",function(a){return function(b,d){a._mouseleave.call(a,c,b,d)}}(this)).bind("mousemove",function(a){return function(b,
d){a._mousemove.call(a,c,b,d)}}(this)).appendTo(k)}}this._tooltip.call(this,c)},gauge:function(c){c=this._getInst(c);if(!c)return!1;var a,b,e,d,f,g=c.settings.width/2,l=c.settings.height/2;b=c.settings.radius;var k=c.settings.radius+5,m=c.settings.radius+30;"svg"===c.settings.plugin&&(a=c.handle.g().attr({"class":"zui-chart-canvas","clip-path":"url(#zinoui-1)"}).getShape());switch(c.settings.plugin){case "svg":c.handle.circle(g,l,b,!1).attr({fill:"red"}).appendTo(a),b=z(g,l,k,-0),e=z(g,l,k,-288),
d=z(g,l,m,-0),f=z(g,l,m,-288),console.log(b,e,d,f),c.handle.rose(b[0],b[1],k,e[0],e[1],f[0],f[1],m,d[0],d[1],!1).attr({fill:"green"}).appendTo(a),a=c.handle.factory("text",{x:g,y:l},!1).attr({x:0,y:0,transform:"matrix(1,0,0,1,"+g+","+l+")",fill:c.settings.textColor,"font-family":c.settings.fontFamily,"font-size":c.settings.fontSize,"text-anchor":"middle"}).appendTo(a).getShape(),a=c.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(a).getShape(),c.handle.textNode("20%",!1).appendTo(a)}},
getX:function(c,a){var b=this._getInst(c);if(!b)return!1;this.getBounds2(c);return(b.settings.width-b.settings.canvasWidth/this.getBounds2(c).xMax*a).toFixed(2)},getXX:function(c,a){var b=this._getInst(c);return b?(b.settings.canvasWidth/this.getBounds2(c).yMax*a+b.settings.paddingLeft).toFixed(2):!1},getY:function(c,a){var b=this._getInst(c);if(!b)return!1;var e=this.getBounds2(c);return(b.settings.height-(a-e.yMin)/(e.yMax-e.yMin)*b.settings.canvasHeight-b.settings.paddingBottom).toFixed(2)},getYY:function(c,
a){var b=this._getInst(c);return b?parseFloat((b.settings.height-b.settings.canvasHeight/this.getBounds2(c).yMax*a-b.settings.paddingBottom).toFixed(2)):!1},getBounds2:function(c){c=this._getInst(c);if(!c)return!1;var a,b,e,d,f,g=0,l=null,k=null,m=null,h=null,n=null,p=null;if(-1===r.inArray(c.settings.type,["candlestick","ohlc"])){d=g;for(a=c.settings.series.length;g<a;g++)for(b=0,e=c.settings.series[g].data.length;b<e;b++)g===d&&0===b?(m=c.settings.series[g].data[b].value,h=c.settings.series[g].data[b].value):
(m=c.settings.series[g].data[b].value>m?c.settings.series[g].data[b].value:m,h=c.settings.series[g].data[b].value<h?c.settings.series[g].data[b].value:h);g=0;for(a=c.settings.categories[0].category.length;g<a;g++)0===g?(l=c.settings.categories[0].category[g].label,k=c.settings.categories[0].category[g].label):(l=c.settings.categories[0].category[g].label>l?c.settings.categories[0].category[g].label:l,k=c.settings.categories[0].category[g].label<k?c.settings.categories[0].category[g].label:k)}switch(c.settings.type){case "bubble":case "scatter":g=
0;for(a=c.settings.series[0].data.length;g<a;g++)for(b=0,e=c.settings.series.length;b<e;b++)0===g&&0===b?(l=c.settings.series[b].data[g].x,k=c.settings.series[b].data[g].x,m=c.settings.series[b].data[g].y,h=c.settings.series[b].data[g].y,p=c.settings.series[b].data[g].z,n=c.settings.series[b].data[g].z):(l=c.settings.series[b].data[g].x>l?c.settings.series[b].data[g].x:l,k=c.settings.series[b].data[g].x<k?c.settings.series[b].data[g].x:k,m=c.settings.series[b].data[g].y>m?c.settings.series[b].data[g].y:
m,h=c.settings.series[b].data[g].y<h?c.settings.series[b].data[g].y:h,p=c.settings.series[b].data[g].z>p?c.settings.series[b].data[g].z:p,n=c.settings.series[b].data[g].z<n?c.settings.series[b].data[g].z:n);break;case "candlestick":case "ohlc":b=g=0;for(a=c.settings.series.length;g<a;g++)for(f in c.settings.series[g])c.settings.series[g].hasOwnProperty(f)&&-1!==r.inArray(f,["open","high","low","close"])&&(0===g&&0===b?(m=c.settings.series[g][f],h=c.settings.series[g][f]):(m=c.settings.series[g][f]>
m?c.settings.series[g][f]:m,h=c.settings.series[g][f]<h?c.settings.series[g][f]:h),b++);g=0;for(a=c.settings.series.length;g<a;g++)0===g?(l=c.settings.series[g][0],k=c.settings.series[g][0]):(l=c.settings.series[g][0]>l?c.settings.series[g][0]:l,k=c.settings.series[g][0]<k?c.settings.series[g][0]:k);l=k=0}return{xMin:parseFloat(k),xMax:parseFloat(l),yMin:h,yMax:m,zMin:n,zMax:p}},getBounds:function(c){c=this._getInst(c);if(!c)return!1;var a,b,e,d,f,g=-1===r.inArray(c.settings.type,["ohlc","candlestick"])?
1:0,l=null,k=null,m=null,h=null;d=g;for(a=c.settings.series.length;g<a;g++)switch(c.settings.type){case "bubble":1===g?(m=c.settings.series[g][2],h=c.settings.series[g][2]):(m=c.settings.series[g][2]>m?c.settings.series[g][2]:m,h=c.settings.series[g][2]<h?c.settings.series[g][2]:h);break;case "ohlc":case "candlestick":for(f in c.settings.series[g])c.settings.series[g].hasOwnProperty(f)&&-1!==r.inArray(f,["open","high","low","close"])&&(1===g?(m=c.settings.series[g][f],h=c.settings.series[g][f]):(m=
c.settings.series[g][f]>m?c.settings.series[g][f]:m,h=c.settings.series[g][f]<h?c.settings.series[g][f]:h));break;default:for(b=1,e=c.settings.series[g].length;b<e;b++)g===d&&1===b?(m=c.settings.series[g][b],h=c.settings.series[g][b]):(m=c.settings.series[g][b]>m?c.settings.series[g][b]:m,h=c.settings.series[g][b]<h?c.settings.series[g][b]:h)}b="bubble"!==c.settings.type?0:1;g=1;for(a=c.settings.series.length;g<a;g++)1===g?(l=c.settings.series[g][b],k=c.settings.series[g][b]):(l=c.settings.series[g][b]>
l?c.settings.series[g][b]:l,k=c.settings.series[g][b]<k?c.settings.series[g][b]:k);return{xMin:k,xMax:l,yMin:h,yMax:m}},setPlot:function(c){if(!this._getInst(c))return!1;this.setGrid(c);this.setLabels(c);this.setAxis(c)},setGrid:function(c){var a=this._getInst(c);if(!a)return!1;var b,e,d,f,g,l,k;this.getBounds(c);var m=this.getBounds2(c);"svg"===a.settings.plugin&&(g=a.handle.g().attr({"class":"zui-chart-grid"}).getShape(),l=a.handle.g().attr({"class":"zui-chart-axis-x"}).getShape(),k=a.handle.g().attr({"class":"zui-chart-axis-y"}).getShape());
switch(a.settings.type){case "area":case "line":case "stepline":case "spline":case "column":case "candlestick":case "ohlc":case "scatter":case "bubble":b=1;-1!==r.inArray(a.settings.type,"ohlc candlestick line area column stepline spline bubble scatter".split(" "))&&(b=0);e=-1!==r.inArray(a.settings.type,"line area column stepline spline bubble scatter".split(" "))?a.settings.series[0].data.length:a.settings.series.length;for(f=a.settings.height-a.settings.paddingBottom;b<=e;b++)switch(d=-1===r.inArray(a.settings.type,
"ohlc candlestick line area column stepline spline bubble scatter".split(" "))?b-1:b,d=a.settings.paddingLeft+a.settings.blockWidth*d,a.settings.plugin){case "canvas":a.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:a.settings.lineRowColor}).setLineDash([5,2]).line(d+.5,a.settings.paddingTop,d+.5,f).setLineDash([0]);a.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:a.settings.axisColor}).line(d+.5,f+1,d+.5,f+5);break;default:a.handle.line(d,a.settings.paddingTop,d,f,!1).attr({fill:"none",
"shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g),a.handle.line(d,f+1,d,f+5,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.axisColor,"stroke-width":1}).appendTo(l)}switch(a.settings.plugin){case "canvas":a.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:a.settings.lineRowColor}).setLineDash([5,2]).line(a.settings.paddingLeft,a.settings.paddingTop+.5,a.settings.paddingLeft+a.settings.canvasWidth,
a.settings.paddingTop+.5).setLineDash([0]);break;default:a.handle.line(a.settings.paddingLeft,a.settings.paddingTop,a.settings.paddingLeft+a.settings.canvasWidth,a.settings.paddingTop,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g)}b=0;for(e=m.yMax;b<=e;b+=Math.ceil(e/4))switch(f=this.getYY(c,b),a.settings.plugin){case "canvas":a.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:a.settings.lineRowColor}).setLineDash([5,
2]).line(a.settings.paddingLeft,f+.5,a.settings.paddingLeft+a.settings.canvasWidth,f+.5).setLineDash([0]);a.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:a.settings.axisColor}).line(a.settings.paddingLeft-4,f+.5,a.settings.paddingLeft,f+.5);break;default:a.handle.line(a.settings.paddingLeft,f,a.settings.paddingLeft+a.settings.canvasWidth,f,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g),a.handle.line(a.settings.paddingLeft-
4,f,a.settings.paddingLeft,f,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.axisColor,"stroke-width":1}).appendTo(k)}break;case "bar":b=0;d=1;for(e=m.yMax;d<=a.settings.blockNum;d++,b+=Math.ceil(e/a.settings.blockNum))switch(f=a.settings.paddingTop+a.settings.blockHeight*b,a.settings.plugin){case "canvas":a.handle.attr({lineWidth:1,fillStyle:"transparent",strokeStyle:a.settings.lineRowColor}).setLineDash([5,2]).line(a.settings.paddingLeft,f+.5,a.settings.paddingLeft+a.settings.canvasWidth,
f+.5).setLineDash([0]);a.handle.attr({fillStyle:a.settings.axisColor,strokeStyle:"transparent"}).fillRect(a.settings.paddingLeft-4,f,4,1);break;default:a.handle.line(a.settings.paddingLeft,f,a.settings.paddingLeft+a.settings.canvasWidth,f,!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:a.settings.lineRowColor,"stroke-dasharray":"5,2","stroke-width":1}).appendTo(g),a.handle.rect(a.settings.paddingLeft-4,f,0,0,4,1,!1).attr({fill:a.settings.axisColor,"shape-rendering":"crispEdges",stroke:"none",
"stroke-width":0}).appendTo(g)}f=a.settings.height-a.settings.paddingBottom;b=0;for(e=m.yMax;b<=e;b+=Math.ceil(e/a.settings.blockNum))switch(c=a.settings.paddingLeft+a.settings.blockWidth*b,a.settings.plugin){case "canvas":a.handle.attr({fillStyle:a.settings.axisColor,strokeStyle:"transparent"}).fillRect(c,f,1,4);a.handle.attr({lineWidth:1,strokeStyle:a.settings.lineRowColor}).setLineDash([5,2]).line(c+.5,a.settings.paddingTop,c+.5,a.settings.paddingTop+a.settings.canvasHeight).setLineDash([0]);break;
default:a.handle.rect(c,f,0,0,1,4,!1).attr({fill:a.settings.axisColor,"shape-rendering":"crispEdges",stroke:"none","stroke-width":0}).appendTo(g),a.handle.line(c,a.settings.paddingTop,c,a.settings.paddingTop+a.settings.canvasHeight,!1).attr({fill:"none","shape-rendering":"crispEdges","stroke-dasharray":"5,2",stroke:a.settings.lineRowColor,"stroke-width":1}).appendTo(g)}}},setLabels:function(c){var a=this._getInst(c);if(!a)return!1;var b,e,d,f,g,l,k;this.getBounds(c);var m=this.getBounds2(c);switch(a.settings.plugin){case "canvas":k=
{fillStyle:a.settings.textColor,font:a.settings.fontSize+" "+a.settings.fontFamily,strokeStyle:"transparent",textAlign:"center"};break;default:l=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-y"}).getShape(),g=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-x"}).getShape(),k={fill:a.settings.textColor,"font-family":a.settings.fontFamily,"font-size":a.settings.fontSize,"text-anchor":"middle"}}switch(a.settings.type){case "area":case "line":case "stepline":case "spline":case "column":case "candlestick":case "ohlc":case "scatter":case "bubble":b=
1;-1!==r.inArray(a.settings.type,"ohlc candlestick pie line area column stepline spline scatter".split(" "))&&(b=0);for(e=a.settings.categories[0].category.length;b<=e;b++)if(d=-1===r.inArray(a.settings.type,"ohlc candlestick pie line area column stepline spline scatter".split(" "))?b-1:b,d=a.settings.paddingLeft+a.settings.blockWidth*d+a.settings.blockWidth/2,f=a.settings.height-a.settings.paddingBottom,b<e)switch(a.settings.plugin){case "canvas":a.handle.attr(k).text(-1===r.inArray(a.settings.type,
["ohlc","candlestick","pie"])?a.settings.categories[0].category[b].label:a.settings.series[b].label,d,f+20);break;default:a.handle.text(d,f+20,-1===r.inArray(a.settings.type,["ohlc","candlestick","pie"])?a.settings.categories[0].category[b].label:a.settings.series[b].label,!1).attr(k).appendTo(g)}g=m.yMax-m.yMin;b=0;e=m.yMax;for(d=m.yMin;b<=e;b+=Math.ceil(e/4),d+=Math.ceil(g/4))switch(f=this.getYY(c,b),a.settings.plugin){case "canvas":a.handle.attr(k).attr({textBaseline:"middle"}).text(0===d%1?d:
d.toFixed(1),a.settings.paddingLeft-20,f);break;default:f=a.handle.factory("text",{x:a.settings.paddingLeft-10,y:f},!1).attr(k).attr({"text-anchor":"end"}).appendTo(l).getShape(),f=a.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(f).getShape(),a.handle.textNode(0===d%1?d:d.toFixed(1),!1).appendTo(f)}break;case "bar":f=a.settings.height-a.settings.paddingBottom;b=0;for(e=m.yMax;b<=e;b+=Math.ceil(e/a.settings.blockNum))switch(d=a.settings.paddingLeft+a.settings.blockWidth*b,a.settings.plugin){case "canvas":a.handle.attr(k).text(b,
d,f+20);break;default:a.handle.text(d,f+20,b,!1).attr(k).appendTo(g)}d=b=0;for(e=m.yMax;d<a.settings.blockNum;d++,b+=Math.ceil(e/a.settings.blockNum))switch(f=a.settings.paddingTop+a.settings.blockHeight*b,a.settings.plugin){case "canvas":a.handle.attr(k).attr({textBaseline:"middle"}).text(a.settings.categories[0].category[d].label,a.settings.paddingLeft-20,f+a.settings.blockHeight/2);break;default:f=a.handle.factory("text",!1).attr(k).attr({x:a.settings.paddingLeft-10,y:f+a.settings.blockHeight/
2,"text-anchor":"end"}).appendTo(l).getShape(),f=a.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(f).getShape(),a.handle.textNode(a.settings.categories[0].category[d].label,!1).appendTo(f)}}},setCircumference:function(c){c=this._getInst(c);if(!c)return!1;var a,b,e,d,f,g,l,k=[],m=Math.floor((c.settings.width-c.settings.paddingRight)/2),h=Math.floor(c.settings.height/2),n=360/c.settings.series[0].data.length,p=c.settings.radius/5;"svg"===c.settings.plugin&&(e=c.handle.g().attr({"class":"zui-chart-lines"}).getShape(),
l=c.handle.g().attr({"class":"zui-chart-grid"}).getShape());a=0;for(b=c.settings.series[0].data.length;a<b;a++)switch(f=m+c.settings.radius*Math.cos((-90+n*a)*Math.PI/180),g=h+c.settings.radius*Math.sin((-90+n*a)*Math.PI/180),c.settings.plugin){case "canvas":c.handle.attr({strokeStyle:c.settings.lineRowColor,lineWidth:1}).line(m,h,f,g);break;default:c.handle.line(m,h,f,g,!1).attr({fill:"none",stroke:c.settings.lineRowColor,"stroke-width":1}).appendTo(e)}switch(c.settings.type){case "radar":e=0;for(d=
5;e<d;e++){k[e]=[];a=0;for(b=c.settings.series[0].data.length;a<b;a++)f=m+(c.settings.radius-p*e)*Math.cos((-90+n*a)*Math.PI/180),g=h+(c.settings.radius-p*e)*Math.sin((-90+n*a)*Math.PI/180),0<a?k[e].push(["L",f,",",g].join("")):k[e].push(["M",f,",",g].join(""));switch(c.settings.plugin){case "canvas":k[e].push(k[e][0]);c.handle.attr({fillStyle:"transparent",strokeStyle:c.settings.lineRowColor,lineWidth:1}).path(k[e].join(""));break;default:k[e].push("Z"),c.handle.path(k[e].join(""),!1).attr({fill:"none",
stroke:c.settings.lineRowColor,"stroke-width":1}).appendTo(l)}}break;default:for(e=0,d=5;e<d;e++)switch(c.settings.plugin){case "canvas":c.handle.attr({fillStyle:"transparent",strokeStyle:c.settings.lineRowColor,lineWidth:1}).begin().circle(m,h,c.settings.radius-p*e).close().fill().stroke();break;default:c.handle.circle(m,h,c.settings.radius-p*e,!1).attr({fill:"none",stroke:c.settings.lineRowColor,"stroke-width":1}).appendTo(l)}}},setCircumferenceLabels:function(c){var a=this._getInst(c);if(!a)return!1;
var b,e,d,f,g,l,k=Math.floor((a.settings.width-a.settings.paddingRight)/2),m=Math.floor(a.settings.height/2),h=this.getBounds2(c),n=360/a.settings.series[0].data.length,p=a.settings.radius/5;"svg"===a.settings.plugin&&(e=a.handle.g().attr({"class":"zui-chart-labels"}).getShape(),g=a.handle.g().attr({"class":"zui-chart-scale"}).getShape());c=0;for(b=a.settings.categories[0].category.length;c<b;c++){switch(a.settings.type){case "radar":l=a.settings.categories[0].category[c].label;break;default:l=(n*
c).toFixed(0),"categories"in a.settings&&a.settings.categories[0]&&"category"in a.settings.categories[0]&&a.settings.categories[0].category&&a.settings.categories[0].category[c]&&"label"in a.settings.categories[0].category[c]&&(l=a.settings.categories[0].category[c].label)}d=k+(a.settings.radius+20)*Math.cos((-90+n*c)*Math.PI/180);f=m+(a.settings.radius+20)*Math.sin((-90+n*c)*Math.PI/180);switch(a.settings.plugin){case "canvas":a.handle.attr({textAlign:"center",textBaseline:"middle",fillStyle:a.settings.textColor,
strokeStyle:"transparent",font:a.settings.fontSize+" "+a.settings.fontFamily}).text(l,d,f);break;default:d=a.handle.factory("text",{x:d,y:f,fill:a.settings.textColor,"font-size":a.settings.fontSize,"font-family":a.settings.fontFamily,"text-anchor":"middle"},!1).appendTo(e).getShape(),d=a.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(d).getShape(),a.handle.textNode(l,!1).appendTo(d)}}for(e=0;5>e;e++)for(c=0,b=a.settings.series[0].data.length;c<b;c++)if(d=k+(a.settings.radius-
p*e)*Math.cos((-90+n*c)*Math.PI/180),f=m+(a.settings.radius-p*e)*Math.sin((-90+n*c)*Math.PI/180),!(0<c))switch(a.settings.plugin){case "canvas":a.handle.attr({textAlign:"right",textBaseline:"middle",fillStyle:a.settings.textColor,font:a.settings.fontSize+" "+a.settings.fontFamily}).text((h.yMax-h.yMax/5*e).toFixed(2),d-5,f);break;default:d=a.handle.factory("text",{x:d-5,y:f,fill:a.settings.textColor,"font-size":a.settings.fontSize,"font-family":a.settings.fontFamily,"text-anchor":"end"},!1).appendTo(g).getShape(),
d=a.handle.factory("tspan",{"alignment-baseline":"central"},!1).appendTo(d).getShape(),a.handle.textNode((h.yMax-h.yMax/5*e).toFixed(2),!1).appendTo(d)}},setAxis:function(c){c=this._getInst(c);if(!c)return!1;var a,b=[];"svg"===c.settings.plugin&&(a=c.handle.g().attr({"class":"zui-chart-axis"}).getShape());switch(c.settings.plugin){case "canvas":b.push(["M",c.settings.paddingLeft+.5,",",c.settings.paddingTop].join(""));b.push(["L",c.settings.paddingLeft+.5,",",c.settings.paddingTop+c.settings.canvasHeight+
.5].join(""));b.push(["L",c.settings.paddingLeft+c.settings.canvasWidth+.5,",",c.settings.paddingTop+c.settings.canvasHeight+.5].join(""));c.handle.attr({fillStyle:"transparent",strokeStyle:c.settings.axisColor,lineWidth:1}).path(b.join(""));break;default:b.push([c.settings.paddingLeft,",",c.settings.paddingTop].join("")),b.push([c.settings.paddingLeft,",",c.settings.paddingTop+c.settings.canvasHeight].join("")),b.push([c.settings.paddingLeft+c.settings.canvasWidth,",",c.settings.paddingTop+c.settings.canvasHeight].join("")),
c.handle.polyline(b.join(" "),!1).attr({fill:"none","shape-rendering":"crispEdges",stroke:c.settings.axisColor,"stroke-width":1}).appendTo(a)}},scatter:function(c){var a=this._getInst(c);if(!a)return!1;this.setGrid.call(this,c);this.setAxis.call(this,c);var b,e,d,f,g,l,k;g=this.getBounds2(c);var m=u.getColors();switch(a.settings.plugin){case "canvas":d={fillStyle:a.settings.textColor,font:a.settings.fontSize+" "+a.settings.fontFamily,strokeStyle:"transparent"};break;default:k=a.handle.g().attr({"class":"zui-chart-markers"}).getShape(),
d={fill:a.settings.textColor,"font-family":a.settings.fontFamily,"font-size":a.settings.fontSize,"text-anchor":"middle"},f=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-y"}).getShape(),l=a.handle.g().attr({"class":"zui-chart-labels zui-chart-labels-x"}).getShape()}b=0;for(e=a.settings.categories[0].category.length;b<e;b++)switch(a.settings.plugin){case "canvas":a.handle.attr(d).attr({textAlign:"center"}).text(a.settings.categories[0].category[b].label,a.settings.paddingLeft+a.settings.blockWidth*
b+a.settings.blockWidth/2,a.settings.height-a.settings.paddingBottom+20);break;default:a.handle.text(a.settings.paddingLeft+a.settings.blockWidth*b+a.settings.blockWidth/2,a.settings.height-a.settings.paddingBottom+20,a.settings.categories[0].category[b].label,!1).attr(d).attr({"text-anchor":"middle"}).appendTo(l)}for(b=0;b<=g.yMax;b+=Math.ceil(g.yMax/4))switch(a.settings.plugin){case "canvas":a.handle.attr(d).attr({textAlign:"right",textBaseline:"middle"}).text(b,a.settings.paddingLeft-20,this.getYY(c,
b));break;default:e=a.handle.factory("text",!1).attr(d).attr({x:a.settings.paddingLeft-10,y:this.getYY(c,b),"text-anchor":"end"}).appendTo(f).getShape(),e=a.handle.factory("tspan",{"alignment-baseline":"middle"},!1).appendTo(e).getShape(),a.handle.textNode(b,!1).appendTo(e)}b=0;for(e=a.settings.series[0].data.length;b<e;b++)for(d=0,f=a.settings.series.length;d<f;d++)switch(g=this.getX(c,a.settings.series[d].data[b].x),l=this.getY(c,a.settings.series[d].data[b].y),a.settings.plugin){case "canvas":a.handle.attr({fillStyle:a.settings.series[d].color||
m[d],strokeStyle:"transparent"}).begin().circle(g,l,4).fill();break;default:a.handle.circle(g,l,4,!1).attr({fill:a.settings.series[d].color||m[d],"fill-opacity":1,stroke:"none","stroke-width":0}).appendTo(k)}r(a.handle.svg).on("mouseover","circle",function(b){b=r(this);a.handle.circle(b.attr("cx"),b.attr("cy"),6,!1).attr({fill:"none",stroke:b.attr("fill"),"stroke-width":1,"class":"zui-chart-over"}).appendTo(k)}).on("mouseout","circle",function(a){r("circle.zui-chart-over").remove()})},spline:function(c){var a=
this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);var b,e,d,f,g,l,k,m,h=[];f=this.getBounds2(c);var n=u.getColors();"svg"===a.settings.plugin&&(k=a.handle.g().attr({"class":"zui-chart-canvas"}).getShape(),m=a.handle.g().attr({"class":"zui-chart-points"}).getShape());c=0;for(b=a.settings.series[0].data.length;c<b;c++)for(e=0,d=a.settings.series.length;e<d;e++)h[e]===y&&(h[e]=[]),h[e].push(a.settings.paddingTop+a.settings.canvasHeight-a.settings.series[e].data[c].value/f.yMax*a.settings.canvasHeight);
e=0;for(d=h.length;e<d;e++){f=[];c=0;for(b=h[e].length;c<b;c++){g=a.settings.paddingLeft+a.settings.blockWidth/2+c*a.settings.blockWidth;if(c!==b-1)switch(l=a.settings.paddingLeft+a.settings.blockWidth/2+(c+1)*a.settings.blockWidth,a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"transparent",strokeStyle:a.settings.series[e].color||n[e],lineWidth:3}).begin().moveTo(g,h[e][c]).bezierCurveTo(g+a.settings.blockWidth/2,h[e][c],l-a.settings.blockWidth/2,h[e][c+1],l,h[e][c+1]).stroke();f.push((0<
c?"":"M"+g+","+h[e][c]+" ")+"C"+(g+a.settings.blockWidth/2)+","+h[e][c]+" "+(l-a.settings.blockWidth/2)+","+h[e][c+1]+" "+l+","+h[e][c+1]);break;default:f.push((0<c?"":"M"+g+","+h[e][c]+" ")+"C"+(g+a.settings.blockWidth/2)+","+h[e][c]+" "+(l-a.settings.blockWidth/2)+","+h[e][c+1]+" "+l+","+h[e][c+1])}switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"#FFFFFF",strokeStyle:a.settings.series[e].color||n[e],lineWidth:1}).begin().circle(g,h[e][c],4).fill().stroke();break;default:a.handle.circle(g,
h[e][c],4,!1).attr({fill:"#FFFFFF","fill-opacity":1,stroke:a.settings.series[e].color||n[e],"stroke-opacity":1,"stroke-width":1}).appendTo(m)}}switch(a.settings.plugin){case "canvas":break;default:a.handle.path(f.join(" "),!1).attr({fill:"none",stroke:a.settings.series[e].color||n[e],"stroke-width":3,style:"stroke-dasharray: 3000,3000"}).appendTo(k)}}},stepline:function(c){var a=this._getInst(c);if(!a)return!1;this.setPlot.call(this,c);var b,e,d,f,g,l,k,m,h=u.getColors(),n=[];"svg"===a.settings.plugin&&
(g=a.handle.g().attr({"class":"zui-chart-canvas","clip-path":"url(#zinoui-1)"}).getShape());b=0;for(e=a.settings.series.length;b<e;b++)for(l=a.settings.paddingLeft+a.settings.blockWidth/2,n[b]=[],d=0,f=a.settings.series[b].data.length;d<f;d++)if(k=a.settings.paddingLeft+a.settings.blockWidth*d+a.settings.blockWidth/2,m=this.getY(c,a.settings.series[b].data[d].value),0<d)switch(a.settings.progression){case "backward":n[b].push(["L",k-a.settings.blockWidth,",",m].join(""));n[b].push(["L",k,",",m].join(""));
break;default:n[b].push(["L",k,",",m].join("")),d<f-1&&n[b].push(["L",k+a.settings.blockWidth,",",m].join(""))}else switch(a.settings.progression){case "backward":n[b].push(["M",l,",",m].join(""));break;default:n[b].push(["M",l,",",m].join("")),n[b].push(["L",l+a.settings.blockWidth,",",m].join(""))}b=0;for(e=n.length;b<e;b++)switch(a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"transparent",strokeStyle:a.settings.series[b].color||h[b],lineWidth:2}).path(n[b].join(""));break;default:a.handle.path(n[b].join(""),
!1).attr({fill:"none",stroke:a.settings.series[b].color||h[b],"stroke-width":2,style:"stroke-dasharray: 3000,3000","marker-start":"url(#marker-"+b+")","marker-mid":"url(#marker-"+b+")","marker-end":"url(#marker-"+b+")"}).appendTo(g)}b=0;for(e=a.settings.series.length;b<e;b++)for(d=0,f=a.settings.series[b].data.length;d<f;d++)switch(k=a.settings.paddingLeft+a.settings.blockWidth*d+a.settings.blockWidth/2,m=this.getY(c,a.settings.series[b].data[d].value),a.settings.plugin){case "canvas":a.handle.attr({fillStyle:"#FFFFFF",
strokeStyle:a.settings.series[b].color||h[b],lineWidth:2}).begin().circle(k,m,4).close().fill().stroke();break;default:a.handle.circle(k,m,4,!1).attr({fill:"#FFFFFF",stroke:a.settings.series[b].color||h[b],"stroke-width":2}).appendTo(g)}},symbol:function(c,a,b,e){c=this._getInst(c);if(!c)return!1;switch(c.settings.plugin){case "canvas":break;default:switch(a){case "":break;case "":break;case "":break;default:c.handle.circle(!1).attr({}).appendTo(e)}}},_mouseenter:function(c,a,b){c=this._getInst(c);
if(!c)return!1;c.settings.tooltip&&"svg"===c.settings.plugin&&(this.tooltip.txt.firstChild.firstChild.nodeValue=b.getAttributeNS("zui","tooltip"),b=this.tooltip.txt.getBBox(),this.tooltip.rect.setAttributeNS(null,"width",Number(b.width)+10),this.tooltip.rect.setAttributeNS(null,"height",Number(b.height)+10),this.tooltip.g1.setAttributeNS(null,"visibility","visible"))},_mouseleave:function(c,a,b){c=this._getInst(c);if(!c)return!1;c.settings.tooltip&&"svg"===c.settings.plugin&&this.tooltip.g1.setAttributeNS(null,
"visibility","hidden")},_mousemove:function(c,a,b){c=this._getInst(c);if(!c)return!1;if(c.settings.tooltip&&"svg"===c.settings.plugin){b=a.offsetX;a=a.offsetY;var e=parseInt(this.tooltip.rect.getAttributeNS(null,"width"),10),d=parseInt(this.tooltip.rect.getAttributeNS(null,"height"),10);a+d+c.settings.tooltip.offset.y>c.settings.height&&(a-=d+c.settings.tooltip.offset.y);b+e+c.settings.tooltip.offset.x>c.settings.width&&(b-=e+c.settings.tooltip.offset.x);this.tooltip.g1.setAttributeNS(null,"transform",
["translate(",b,",",a,")"].join(""))}},_tooltip:function(c){c=this._getInst(c);if(!c)return!1;c.settings.tooltip&&"svg"===c.settings.plugin&&(this.tooltip.g1=c.handle.g().attr({"class":"zui-chart-tooltip",visibility:"hidden",transform:"translate(0,0)"}).getShape(),this.tooltip.rect=c.handle.rect(c.settings.tooltip.offset.x,c.settings.tooltip.offset.y,0,0,100,22,!1).attr({fill:c.settings.tooltip.fill,opacity:c.settings.tooltip.opacity}).appendTo(this.tooltip.g1).getShape(),this.tooltip.txt=c.handle.factory("text",
!1).attr({x:20,y:20,fill:c.settings.tooltip.color,"font-family":c.settings.fontFamily,"font-size":c.settings.fontSize,"text-anchor":"start"}).appendTo(this.tooltip.g1).getShape(),this.tooltip.span=c.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(this.tooltip.txt).getShape(),c.handle.textNode("",!1).appendTo(this.tooltip.span))},_newInst:function(c){return{id:c[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:c,uid:Math.floor(99999999*Math.random()),isDisabled:!1,
settings:{}}},_getInst:function(c){try{return r.data(c,"chart")}catch(a){throw"Missing instance data for this chart";}}};r.fn.zinoChart=function(c){var a=Array.prototype.slice.call(arguments,1);return"string"==typeof c&&"isDisabled"==c||"option"==c&&2==arguments.length&&"string"==typeof arguments[1]?r.zinoChart["_"+c+"Chart"].apply(r.zinoChart,[this[0]].concat(a)):this.each(function(){"string"==typeof c?r.zinoChart["_"+c+"Chart"].apply(r.zinoChart,[this].concat(a)):r.zinoChart._attachChart(this,c)})};
r.zinoChart=new u;r.zinoChart.version="1.5"})(jQuery);
