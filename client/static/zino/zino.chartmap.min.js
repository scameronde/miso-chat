(function(k,r){function n(){this._defaults={plugin:"svg",map:"BG",fill:"#5DC1E4",hover:"#957030",background:"#FFFFFF",palette:!0,provinces:[{id:"BGR-2235",fill:"#5DC1E4"},{id:"BGR-2244",fill:"#5DC1E4"},{id:"BGR-2255",fill:"#5DC1E4"},{id:"BGR-2231",fill:"#5DC1E4"},{id:"BGR-2232",fill:"#5DC1E4"},{id:"BGR-2233",fill:"#5DC1E4"},{id:"BGR-2234",fill:"#5DC1E4"},{id:"BGR-2236",fill:"#5DC1E4"},{id:"BGR-2237",fill:"#5DC1E4"},{id:"BGR-2243",fill:"#5DC1E4"},{id:"BGR-2245",fill:"#5DC1E4"},{id:"BGR-2254",fill:"#5DC1E4"},
{id:"BGR-3002",fill:"#5DC1E4"},{id:"BGR-2252",fill:"#5DC1E4"}],font:{family:"Arial",size:"12px"},tooltip:{color:"#fff",fill:"#000",radius:"2px",opacity:1,offset:{x:15,y:15},pattern:"%name"},zoom:11,width:530,height:320,click:null}}var l={cutHex:function(a){return"#"==a.charAt(0)?a.substring(1,7):a},hexToR:function(a){return parseInt(l.cutHex(a).substring(0,2),16)},hexToG:function(a){return parseInt(l.cutHex(a).substring(2,4),16)},hexToB:function(a){return parseInt(l.cutHex(a).substring(4,6),16)},
hexToRgb:function(a){return[l.hexToR(a),l.hexToG(a),l.hexToB(a)]},rgbToHex:function(a,c,b){return["#",l.toHex(a),l.toHex(c),l.toHex(b)].join("")},toHex:function(a){a=parseInt(a,10);if(isNaN(a))return"00";a=Math.max(0,Math.min(a,255));return["0123456789ABCDEF".charAt((a-a%16)/16),"0123456789ABCDEF".charAt(a%16)].join("")},rgbToHsv:function(a,c,b){a=parseInt((""+a).replace(/\s/g,""),10);c=parseInt((""+c).replace(/\s/g,""),10);b=parseInt((""+b).replace(/\s/g,""),10);if(null===a||null===c||null===b||
isNaN(a)||isNaN(c)||isNaN(b)||0>a||0>c||0>b||255<a||255<c||255<b)return!1;a/=255;c/=255;b/=255;var e=Math.min(a,Math.min(c,b)),f=Math.max(a,Math.max(c,b));return e===f?[0,0,e]:[60*((a===e?3:b===e?1:5)-(a===e?c-b:b===e?a-c:b-a)/(f-e)),(f-e)/f,f]},hsvToRgb:function(a){var c,b;if(0===a[1])c=b=a=Math.round(2.55*a[2]);else{a[0]/=60;c=Math.floor(a[0]);b=a[0]-c;var e=a[2]*(1-a[1]),f=a[2]*(1-a[1]*b),d=a[2]*(1-a[1]*(1-b));switch(c){case 0:c=a[2];b=d;a=e;break;case 1:c=f;b=a[2];a=e;break;case 2:c=e;b=a[2];
a=d;break;case 3:c=e;b=f;a=a[2];break;case 4:c=d;b=e;a=a[2];break;default:c=a[2],b=e,a=f}c=Math.round(255*c);b=Math.round(255*b);a=Math.round(255*a)}return[c,b,a]},hueShift:function(a,c){for(a+=c;360<=a;)a-=360;for(;0>a;)a+=360;return a},complementary:function(a){a=a.match(/[0-9a-fA-F]+/)?l.hexToRgb(a):a;a=l.rgbToHsv(a[0],a[1],a[2]);a[0]=l.hueShift(a[0],180);a=l.hsvToRgb(a);return l.rgbToHex(a[0],a[1],a[2])}};n.getWebsafeColors=function(){var a,c,b,e=[],f="00 33 66 99 CC FF".split(" ");for(a=0;6>
a;a++)for(c=0;6>c;c++)for(b=0;6>b;b++)e.push(["#",f[a],f[c],f[b]].join(""));return e};n.getColorLuminance=function(a,c){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);c=c||0;var b="#",e,f;for(f=0;3>f;f++)e=parseInt(a.substr(2*f,2),16),e=Math.round(Math.min(Math.max(0,e+e*c),255)).toString(16),b+=("00"+e).substr(e.length);return b};n.getColors=function(a){var c="#3366CC #DC3912 #067A06 #FFCC00 #663300 #660066 #3399CC #CC6600 #CC3399 #CC6666 #339900 #CC99FF #CC3300 #99FF66 #993366 #16448A".split(" ");
return a!==r&&c[a]!==r?c[a]:c};n.getColorPalette=function(a,c){var b=0,e="up",f=.2,d=[];switch(arguments.length){case 3:e=arguments[2];break;case 4:e=arguments[2],f=arguments[3]}for(var g=0;g<c;g+=1)b="up"==e?b+f:b-f,d.push(n.getColorLuminance(a,b));return d};n.prototype={_attachChartmap:function(a,c){if(this._getInst(a))return!1;var b=k(a),b=this._newInst(b);k.extend(b.settings,this._defaults,c);b.settings.earthRadius=6378137;b.settings.index=b.settings.earthRadius/Math.max(b.settings.width,b.settings.height);
b.settings.wIndex=b.settings.earthRadius/b.settings.width;b.settings.hIndex=b.settings.earthRadius/b.settings.height;switch(b.settings.plugin){case "svg":b.handle=zino.Svg({target:a,width:b.settings.width,height:b.settings.height,viewBox:"0 0 WW HH".replace("WW",b.settings.width).replace("HH",b.settings.height),preserveAspectRatio:"xMidYMid meet",namespaces:{zui:"http://zinoui.com/svgns"}});b.handle.desc("Created with ZinoUI "+k.zinoChartmap.version);var e=b.handle.clipPath("zinoui-1").getShape();
b.handle.rect(0,0,0,0,b.settings.width,b.settings.height,!1).attr({fill:"none"}).appendTo(e)}k.data(a,"chartmap",b);this.draw.call(this,a)},draw:function(a){var c=this._getInst(a);if(!c)return!1;switch(c.settings.plugin){case "svg":c.handle.rect(0,0,0,0,c.settings.width,c.settings.height).attr({fill:c.settings.background,stroke:"none","stroke-width":0}).insert()}this.map.call(this,a)},map:function(a){function c(a,b){var c;c=k(b);var e=c.attr("fill"),f=b.getAttributeNS("zui","hover");c.data("fill",
e);b.setAttributeNS(null,"fill",f||d.settings.hover||l.complementary(e));d.settings.tooltip&&(v.firstChild.firstChild.nodeValue=b.getAttributeNS("zui","tooltip"),c=v.getBBox(),t.setAttributeNS(null,"width",Number(c.width)+10),t.setAttributeNS(null,"height",Number(c.height)+10),p.setAttributeNS(null,"visibility","visible"))}function b(a,b){b.setAttributeNS(null,"fill",k(b).data("fill"));d.settings.tooltip&&p.setAttributeNS(null,"visibility","hidden")}function e(a,b){if(d.settings.tooltip){var c=a.offsetX,
e=a.offsetY,f=parseInt(t.getAttributeNS(null,"width"),10),g=parseInt(t.getAttributeNS(null,"height"),10);e+g+d.settings.tooltip.offset.y>d.settings.height&&(e-=g+d.settings.tooltip.offset.y);c+f+d.settings.tooltip.offset.x>d.settings.width&&(c-=f+d.settings.tooltip.offset.x);p.setAttributeNS(null,"transform",["translate(",c,",",e,")"].join(""))}}function f(a,b){d.settings.click&&d.settings.click.call(this,a,b)}var d=this._getInst(a);if(!d)return!1;if(!(d.settings.map in zino.Chartmap.countries))throw Error(["Please verify that ",
d.settings.map,".js is loaded."].join(""));var g=zino.Chartmap.countries[d.settings.map],w=parseInt(g.scale),z=n.getColorPalette(d.settings.fill,g.provinces.length,"down",.005);n.getColors();var h,m,u,r,q,p,t,v,x,y;switch(d.settings.plugin){case "svg":m=d.handle.g().attr({"class":"zui-chartmap-map",transform:"translate(XX,YY) scale(ZOOMX,ZOOMY)".replace("XX",-g.minx*w/d.settings.index*d.settings.zoom).replace("YY",g.maxy*w/d.settings.index*d.settings.zoom).replace(/ZOOMX/g,1*parseFloat(d.settings.zoom)).replace(/ZOOMY/g,
-1*parseFloat(d.settings.zoom))});a=m.getShape();if(d.settings.provinces)for(h=0,m=g.provinces.length;h<m;h+=1)for(u=0,r=g.provinces[h].polygon.length;u<r;u+=1)q=g.provinces[h].polygon[u].split(" "),q.forEach(function(a,b,c){c[b]=(parseFloat(a)*w/d.settings.index).toFixed(2);isNaN(c[b])}),x=d.settings.palette?z[h]||n.getColorLuminance(d.settings.fill,1-h/10):d.settings.fill,y=d.settings.hover,0<d.settings.provinces.length&&d.settings.provinces.forEach(function(a,b,c){"string"===typeof a&&a==g.provinces[h].id?
(x=d.settings.fill,y=d.settings.hover):a.id&&a.id==g.provinces[h].id&&(x=a.fill||d.settings.fill,y=a.hover||d.settings.hover)}),d.handle.polygon(q.join(" ")).attr({"zui:tooltip":d.settings.tooltip.pattern?d.settings.tooltip.pattern.replace("%name",g.provinces[h].name):g.provinces[h].name,id:g.provinces[h].id,fill:x,"zui:hover":y}).bind("mouseenter",c).bind("mouseleave",b).bind("mousemove",e).bind("click",f).appendTo(a);else for(m.attr({"zui:tooltip":d.settings.tooltip.pattern?d.settings.tooltip.pattern.replace("%name",
g.name):g.name}).bind("mouseenter",c).bind("mouseleave",b).bind("mousemove",e).bind("click",f),h=0,m=g.country.length;h<m;h+=1)q=g.country[h].split(" "),q.forEach(function(a,b,c){c[b]=(parseFloat(a)*w/d.settings.index).toFixed(2)}),d.handle.polygon(q.join(" ")).attr({fill:d.settings.fill,"zui:hover":d.settings.hover}).appendTo(a);m=a.getBoundingClientRect();z=(d.settings.width-m.width)/2;m=(d.settings.height-m.height)/2;0>m&&(m=0);d.handle.g().attr({transform:"translate(XX,YY)".replace("XX",z).replace("YY",
m)}).append(a).getShape();d.settings.tooltip&&(p=d.handle.g().attr({"class":"zui-chartmap-tooltip",visibility:"hidden",transform:"translate(0,0)"}).getShape(),t=d.handle.rect(d.settings.tooltip.offset.x,d.settings.tooltip.offset.y,0,0,100,22,!1).attr({fill:d.settings.tooltip.fill,opacity:d.settings.tooltip.opacity}).appendTo(p).getShape(),v=d.handle.factory("text",!1).attr({x:20,y:20,fill:d.settings.tooltip.color,"font-family":d.settings.font.family,"font-size":d.settings.font.size,"text-anchor":"start"}).appendTo(p).getShape(),
a=d.handle.factory("tspan",!1).attr({"alignment-baseline":"text-before-edge"}).appendTo(v).getShape(),d.handle.textNode("",!1).appendTo(a))}},_newInst:function(a){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,uid:Math.floor(99999999*Math.random()),isDisabled:!1,settings:{}}},_getInst:function(a){try{return k.data(a,"chartmap")}catch(c){throw"Missing instance data for this chartmap";}}};k.fn.zinoChartmap=function(a){var c=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&
"isDisabled"==a||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?k.zinoChartmap["_"+a+"Chartmap"].apply(k.zinoChartmap,[this[0]].concat(c)):this.each(function(){"string"==typeof a?k.zinoChartmap["_"+a+"Chartmap"].apply(k.zinoChartmap,[this].concat(c)):k.zinoChartmap._attachChartmap(this,a)})};k.zinoChartmap=new n;k.zinoChartmap.version="1.5";window.zino=window.zino||{};window.zino.Chartmap={countries:{}}})(jQuery);
